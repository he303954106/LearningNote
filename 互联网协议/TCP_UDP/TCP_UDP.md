## TCP UDP

### 区别

1.TCP面向连接,UDP面向无连接

2.TCP提供可靠交付,UDP继承了ip包特性,不保证不丢失,不保证按顺序到达

3.TCP面向字节流,发送的都是一个一个流,没头没尾

UDP继承了ip特性,基于数据报的,一个一个发,一个一个收

4.TCP可以拥塞控制,UDP让发就发

5.TCP是一个有状态的服务,能精确记录发送了没有,接收到没有,发送到哪个了接收到哪个



## UDP

UDP包头里面包括,源端口号,目标端口号,没有其他的,极其简单

![6d1313f51b9dfd7ab454b2cef1cb37bf](./6d1313f51b9dfd7ab454b2cef1cb37bf.jpg)

### 特点

1.沟通简单

2.可以给任何人传多个数据,也可以给他传数据

3.不会根据网络进行拥塞控制



### 使用场景

1.需要资源少,在网络情况比较好的内网,或者对于丢包不敏感的应用

2.不需要一对一沟通,建立连接,而是可以广播的应用

3.需要处理速度快,时延低,可以容忍少数丢包,但是要求即便网络拥塞,也毫不退缩



## TCP

包头有源端口号和目标端口号,和UDP一样

包的序号,解决乱序问题

包的确认序号,来确认对方有没有收到

![a795461effcce686a43f48e094c9adbf](./a795461effcce686a43f48e094c9adbf.jpg)

### 三次握手

TCP的连接建立

A:您好,我是A.

B:您好A,我是B.

A:您好B

这个过程称之为"请求->应答->应答之应答"

握手次数当然可以更多,但没必要,一般A和B建立连接后,A会马上发送数据

就算A不发数据,建立连接后空着,可以要求开启keepalive,如果A长时间不发包给B,可以主动关闭



### 四次挥手

A:B啊,我不想玩了

B:哦,我知道了

B:A啊,我也不玩了,拜拜

A:好的,拜拜

![1f6a5e17b34f00d28722428b7b8ccb11](./1f6a5e17b34f00d28722428b7b8ccb11.jpg)